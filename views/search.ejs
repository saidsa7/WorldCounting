<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Search</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <style>
    body {
      background-color: #1a202c;
      color: #e2e8f0;
      font-family: Arial, sans-serif;
    }
  </style>
  <body>
    <%- include('components/navbar', { currentPage: "search", user: user }) %>

    <div class="container mx-auto mt-6">
      <h1 class="text-2xl font-bold mb-4">
        Search results for "<%= searchTerm %>"
      </h1>

      <% if (textsArr.length === 0) { %>
      <p>No results found.</p>
      <% } else { %>
      <div class="max-w-3xl mx-auto mt-8">
        <% textsArr.forEach(text => { %>
        <article class="bg-white p-6 rounded-xl shadow-sm mb-6">
          <!-- Title -->
          <h2 class="text-xl font-semibold text-gray-900 textTitle mb-2">
            <%- text.title.replace(regex, `<mark
              class="bg-yellow-100 px-1 rounded"
              >$&</mark
            >`) %>
          </h2>

          <!-- Text -->
          <p
            class="text-lg leading-7 text-gray-700 textContent whitespace-pre-line"
          >
            <%- text.text.replace(regex, `<mark
              class="bg-yellow-100 px-1 rounded"
              >$&</mark
            >`) %>
          </p>
        </article>
        <% }) %>
      </div>
      <% } %>
    </div>

    <!-- <script>

      if (searchTerm) {
        const escapeRegex = (string) =>
          string.replace(/[.*+?^${}()|[\]\\]/g, "\\$&");

        const regex = new RegExp(`(${escapeRegex(searchTerm)})`, "gi");

        document.querySelectorAll(".textContent, .textTitle").forEach((el) => {
          el.innerHTML = el.textContent.replace(
            regex,
            `<mark class="bg-yellow-100 px-1 rounded">$1</mark>`
          );
        });
      }
    </script> -->
  </body>
</html>
